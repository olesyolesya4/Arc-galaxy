<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Arc Galaxy Generator</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            background-image: url("Arc.png");
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            color: #f5f7ff;
        }

        .app {
            background: radial-gradient(circle at top, rgba(90, 180, 255, 0.18), rgba(4, 8, 20, 0.96));
            backdrop-filter: blur(12px);
            border-radius: 24px;
            max-width: 1100px;
            width: 95%;
            padding: 20px 24px 18px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 0 40px rgba(0, 0, 0, 0.8);
        }

        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
        }

        .logo-dot {
            width: 30px;
            height: 30px;
            border-radius: 999px;
            background: radial-gradient(circle at 30% 20%, #5cf0ff, #3658ff, #190a47);
            box-shadow: 0 0 16px rgba(92, 240, 255, 0.7);
        }

        .title-block {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        h1 {
            font-size: 1.3rem;
        }

        .subtitle {
            font-size: 0.85rem;
            opacity: 0.8;
        }

        .badge {
            font-size: 0.7rem;
            border-radius: 999px;
            padding: 4px 9px;
            border: 1px solid rgba(160, 200, 255, 0.8);
            text-transform: uppercase;
            letter-spacing: 0.08em;
        }

        main {
            display: grid;
            grid-template-columns: minmax(0, 1.3fr) minmax(0, 1.1fr);
            gap: 16px;
        }

        @media (max-width: 900px) {
            main {
                grid-template-columns: 1fr;
            }
        }

        .panel {
            padding: 10px 0;
        }

        .controls {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-bottom: 12px;
        }

        button {
            border: none;
            padding: 8px 15px;
            border-radius: 999px;
            cursor: pointer;
            font-size: 0.9rem;
            font-weight: 600;
            display: inline-flex;
            align-items: center;
            gap: 6px;
            background: rgba(12, 120, 255, 0.15);
            border: 1px solid rgba(150, 200, 255, 0.8);
            color: #f5f7ff;
            transition: all 0.12s ease;
        }

        button:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.5);
            background: radial-gradient(circle at top left, rgba(92, 240, 255, 0.28), rgba(21, 45, 120, 0.9));
        }

        button:active {
            transform: translateY(0);
            box-shadow: none;
        }

        button.secondary {
            background: rgba(9, 15, 40, 0.8);
        }

        button.ghost {
            background: transparent;
            border-style: dashed;
            border-color: rgba(150, 200, 255, 0.6);
        }

        button[disabled] {
            opacity: 0.45;
            cursor: default;
        }

        .card {
            background: radial-gradient(circle at top, rgba(37, 70, 160, 0.3), rgba(3, 7, 22, 0.96));
            border: 1px solid rgba(167, 204, 255, 0.36);
            border-radius: 16px;
            padding: 12px 14px;
            box-shadow: 0 0 18px rgba(0, 0, 0, 0.7);
            margin-bottom: 10px;
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 6px;
        }

        .card-title {
            font-size: 1rem;
            font-weight: 600;
        }

        .pill {
            font-size: 0.7rem;
            padding: 3px 8px;
            border-radius: 999px;
            border: 1px solid rgba(140, 255, 220, 0.8);
            background: rgba(4, 240, 195, 0.12);
        }

        .rows {
            font-size: 0.86rem;
        }

        .row {
            display: flex;
            justify-content: space-between;
            gap: 10px;
            margin-bottom: 3px;
        }

        .label {
            opacity: 0.75;
        }

        .value {
            font-weight: 500;
            text-align: right;
        }

        .empty {
            opacity: 0.7;
            font-style: italic;
        }

        .lore {
            margin-top: 7px;
            padding-top: 6px;
            border-top: 1px dashed rgba(190, 215, 255, 0.4);
            font-size: 0.8rem;
            line-height: 1.35;
            opacity: 0.95;
        }

        .galaxy-list {
            max-height: 320px;
            overflow-y: auto;
            padding-right: 4px;
            font-size: 0.8rem;
        }

        .galaxy-card {
            border-radius: 12px;
            padding: 7px 9px;
            margin-bottom: 6px;
            background: linear-gradient(135deg, rgba(6, 16, 46, 0.9), rgba(11, 38, 86, 0.9));
            border: 1px solid rgba(145, 191, 255, 0.45);
        }

        .galaxy-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 2px;
        }

        .galaxy-name {
            font-weight: 600;
        }

        .rarity-common {
            color: #b9c4ff;
        }

        .rarity-rare {
            color: #85f9ff;
        }

        .rarity-legendary {
            color: #ffd973;
        }

        .galaxy-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 4px;
            margin-top: 3px;
        }

        .galaxy-tag {
            border-radius: 999px;
            padding: 1px 7px;
            border: 1px solid rgba(132, 180, 255, 0.7);
        }

        footer {
            margin-top: 8px;
            font-size: 0.75rem;
            opacity: 0.78;
            display: flex;
            justify-content: space-between;
            gap: 10px;
        }

        code {
            font-family: "JetBrains Mono", monospace;
            font-size: 0.78rem;
        }
    </style>
</head>
<body>
<div class="app">
    <header>
        <div class="title-block">
            <div class="logo-dot" aria-hidden="true"></div>
            <div>
                <h1>Arc Galaxy Generator</h1>
                <div class="subtitle">Fan-made Arc-style world builder ¬∑ v1.1</div>
            </div>
        </div>
        <div class="badge">Prototype</div>
    </header>

    <main>
        <section class="panel">
            <div class="subtitle" style="margin-bottom:10px;">
                Generate Arc-style planets and cities. Save favourites to <strong>My Galaxy</strong> and imagine them as
                future on-chain assets on Arc.
            </div>

            <div class="controls">
                <button onclick="generatePlanet()"><span>ü™ê</span>Generate planet</button>
                <button onclick="generateCity()"><span>üèôÔ∏è</span>Generate city</button>
                <button onclick="generatePlanet(); generateCity();"><span>‚ú®</span>Both</button>
                <button id="savePlanetBtn" class="secondary" onclick="saveCurrentPlanet()" disabled>
                    <span>üíæ</span>Save planet
                </button>
                <button class="ghost" onclick="mintComingSoon()"><span>üß¨</span>Mint as NFT (coming soon)</button>
            </div>

            <div class="card">
                <div class="card-header">
                    <div class="card-title">Planet</div>
                    <div id="planetRarityPill" class="pill" style="display:none;"></div>
                </div>
                <div id="planetResult" class="rows empty">
                    Click <strong>Generate planet</strong> to create a new world.
                </div>
                <div id="planetLore" class="lore" style="display:none;"></div>
            </div>

            <div class="card">
                <div class="card-header">
                    <div class="card-title">City</div>
                </div>
                <div id="cityResult" class="rows empty">
                    Click <strong>Generate city</strong> to create a settlement on your world.
                </div>
                <div id="cityLore" class="lore" style="display:none;"></div>
            </div>
        </section>

        <section class="panel">
            <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:6px;">
                <div>My Galaxy</div>
                <div id="galaxyCountLabel" style="font-size:0.8rem;opacity:0.8;">0 saved worlds</div>
            </div>
            <div class="subtitle" style="margin-bottom:8px;">
                Saved worlds are stored only in your browser (localStorage). In a future version they could be minted
                as NFTs on Arc testnet.
            </div>
            <div class="controls" style="margin-bottom:8px;">
                <button class="ghost" onclick="clearGalaxy()"><span>üßπ</span>Clear galaxy</button>
            </div>
            <div id="galaxyList" class="galaxy-list empty">
                No worlds saved yet. Generate a planet you like and click <strong>Save planet</strong>.
            </div>
        </section>
    </main>

    <footer>
        <div>Background: <code>Arc.png</code>. Unofficial fan project inspired by Arc.</div>
        <div>Roadmap: AI lore ¬∑ Arc testnet NFT minting.</div>
    </footer>
</div>

<script>
    const PLANET_TYPES = [
        "gas giant",
        "terrestrial",
        "oceanic",
        "ice world",
        "desert world",
        "lava planet"
    ];

    const ATMOSPHERES = [
        "oxygen-rich",
        "methane-based",
        "thin",
        "dense",
        "toxic",
        "ionized",
        "no atmosphere"
    ];

    const CLIMATES = [
        "very cold",
        "temperate",
        "hot",
        "superheated",
        "tidally locked",
        "highly unstable"
    ];

    const BIOMES = [
        "forests",
        "jungles",
        "grasslands",
        "deserts",
        "glaciers",
        "oceans",
        "rocky badlands",
        "swamps",
        "crystal plains"
    ];

    const CIV_LEVELS = [
        "no life",
        "primitive microbial life",
        "emerging intelligent life",
        "spacefaring civilization",
        "post-singularity civilization"
    ];

    const CITY_SIZES = ["village", "small city", "medium city", "megacity"];

    const CITY_SPECIALTIES = [
        "trade",
        "mining",
        "magic",
        "military base",
        "harbor",
        "science",
        "farming",
        "energy production"
    ];

    const GOV_TYPES = [
        "monarchy",
        "republic",
        "technocracy",
        "theocracy",
        "anarchy",
        "corporatocracy",
        "city-state"
    ];

    const PROBLEMS = [
        "crime",
        "corruption",
        "epidemic",
        "riots",
        "nearby monsters",
        "economic crisis",
        "environmental disaster",
        "AI uprisings"
    ];

    const FEATURES = [
        "massive walls",
        "floating platforms",
        "underground tunnels",
        "canal network",
        "airship port",
        "crystal towers",
        "orbital elevator",
        "neon districts"
    ];

    let currentPlanet = null;
    let galaxy = [];

    function randomItem(list) {
        return list[Math.floor(Math.random() * list.length)];
    }

    function getRandomInt(min, max) {
        return Math.floor(Math.random() * (max - min + 1)) + min;
    }

    function getRandomFloat(min, max, decimals) {
        const value = Math.random() * (max - min) + min;
        const factor = Math.pow(10, decimals);
        return Math.round(value * factor) / factor;
    }

    function generatePlanetName() {
        const prefixes = ["Ze", "Ka", "Ar", "No", "Te", "Lu", "Va", "Xi", "Pro", "Al", "Cy", "Or", "Ny"];
        const suffixes = ["ron", "tar", "lia", "mos", "dra", "phos", "mir", "tis", "var", "lun", "dora", "thys"];
        const number = getRandomInt(1, 999);
        return randomItem(prefixes) + randomItem(suffixes) + "-" + number;
    }

    function generateCityName() {
        const prefixes = ["Ar", "Bre", "Cal", "Dor", "El", "Far", "Gra", "Il", "Mor", "Nor", "Syn", "Lyra"];
        const middles = ["an", "en", "or", "in", "ul", "ar", "el", "ir", "um", "on", "is", "yn"];
        const suffixes = ["grad", "burg", "polis", "mere", "hold", "ford", "gate", "haven", "spire", "reach"];
        return randomItem(prefixes) + randomItem(middles) + randomItem(suffixes);
    }

    function computeRarity(planet) {
        let score = 0;
        if (planet.type === "lava planet" || planet.type === "oceanic") score += 2;
        if (planet.type === "gas giant") score += 1;
        if (planet.civilizationLevel === "spacefaring civilization") score += 3;
        if (planet.civilizationLevel === "post-singularity civilization") score += 5;
        if (planet.gravityG < 0.4 || planet.gravityG > 2.2) score += 2;
        if (planet.atmosphere === "ionized" || planet.atmosphere === "no atmosphere") score += 2;
        if (planet.atmosphere === "toxic") score += 1;
        if (planet.mainBiome === "crystal plains") score += 3;
        if (planet.moons === 0) score += 1;
        if (planet.moons >= 5) score += 2;
        if (planet.radiusKm < 3000 || planet.radiusKm > 60000) score += 2;

        let label = "Common";
        let cssClass = "rarity-common";

        if (score >= 7 && score < 12) {
            label = "Rare";
            cssClass = "rarity-rare";
        } else if (score >= 12) {
            label = "Legendary";
            cssClass = "rarity-legendary";
        }

        return { score, label, cssClass };
    }

    function generatePlanetLore(planet, rarityLabel) {
        const introTemplates = [
            `${planet.name} is a ${planet.type} with a ${planet.atmosphere} atmosphere and predominantly ${planet.mainBiome}.`,
            `Orbiting a distant star, ${planet.name} combines ${planet.mainBiome} with a ${planet.climate} climate.`,
            `${planet.name} stands out as a ${planet.type} shaped by ${planet.climate} conditions and ${planet.mainBiome}.`
        ];

        const civTemplates = [
            `The world currently hosts ${planet.civilizationLevel}, leaving faint traces visible from orbit.`,
            `At the surface, ${planet.civilizationLevel} has reshaped parts of the landscape.`,
            `Hidden beneath storms, ${planet.civilizationLevel} slowly expands across the planet.`
        ];

        const rarityTemplates = {
            "Common": [
                `Explorers consider it a steady but unremarkable candidate for future missions.`,
                `It is a solid waypoint world, useful but not yet the stuff of legends.`
            ],
            "Rare": [
                `Because of its unusual parameters, many factions quietly compete for access.`,
                `Rumors suggest that whoever controls this planet gains a strategic advantage in nearby systems.`
            ],
            "Legendary": [
                `Stories travel across the sector about impossible phenomena recorded here.`,
                `Entire fleets have vanished chasing secrets supposedly buried beneath its surface.`
            ]
        };

        return `${randomItem(introTemplates)} ${randomItem(civTemplates)} ${randomItem(rarityTemplates[rarityLabel])}`;
    }

    function generatePlanet() {
        const planet = {
            name: generatePlanetName(),
            type: randomItem(PLANET_TYPES),
            atmosphere: randomItem(ATMOSPHERES),
            climate: randomItem(CLIMATES),
            mainBiome: randomItem(BIOMES),
            civilizationLevel: randomItem(CIV_LEVELS),
            radiusKm: getRandomInt(2000, 80000),
            gravityG: getRandomFloat(0.2, 3.0, 2),
            moons: getRandomInt(0, 12)
        };

        const rarity = computeRarity(planet);
        planet.rarityScore = rarity.score;
        planet.rarityLabel = rarity.label;

        currentPlanet = planet;
        document.getElementById("savePlanetBtn").disabled = false;

        const pill = document.getElementById("planetRarityPill");
        pill.style.display = "inline-block";
        pill.textContent = planet.rarityLabel;
        pill.className = "pill " + (
            rarity.label === "Legendary" ? "rarity-legendary" :
            rarity.label === "Rare" ? "rarity-rare" : "rarity-common"
        );

        const planetResult = document.getElementById("planetResult");
        planetResult.classList.remove("empty");
        planetResult.innerHTML = `
            <div class="row"><div class="label">Name</div><div class="value">${planet.name}</div></div>
            <div class="row"><div class="label">Type</div><div class="value">${planet.type}</div></div>
            <div class="row"><div class="label">Atmosphere</div><div class="value">${planet.atmosphere}</div></div>
            <div class="row"><div class="label">Climate</div><div class="value">${planet.climate}</div></div>
            <div class="row"><div class="label">Main biome</div><div class="value">${planet.mainBiome}</div></div>
            <div class="row"><div class="label">Civilization level</div><div class="value">${planet.civilizationLevel}</div></div>
            <div class="row"><div class="label">Radius</div><div class="value">${planet.radiusKm.toLocaleString()} km</div></div>
            <div class="row"><div class="label">Gravity</div><div class="value">${planet.gravityG} g</div></div>
            <div class="row"><div class="label">Moons</div><div class="value">${planet.moons}</div></div>
            <div class="row"><div class="label">Rarity score</div><div class="value">${planet.rarityScore}</div></div>
        `;

        const lore = document.getElementById("planetLore");
        lore.style.display = "block";
        lore.textContent = generatePlanetLore(planet, planet.rarityLabel);
    }

    function estimatePopulation(size) {
        switch (size) {
            case "village":
                return getRandomInt(200, 2000);
            case "small city":
                return getRandomInt(5000, 50000);
            case "medium city":
                return getRandomInt(60000, 400000);
            case "megacity":
                return getRandomInt(500000, 20000000);
            default:
                return getRandomInt(1000, 100000);
        }
    }

    function generateCityLore(city) {
        const hooks = [
            `Locals say the city never truly sleeps; its skyline glows even during eclipses.`,
            `Smugglers and diplomats cross paths in shadowy side streets.`,
            `All major factions maintain a quiet presence here.`,
            `Every decade, a festival floods the streets with travellers from distant systems.`
        ];

        const focus = [
            `Its ${city.specialty} focus shapes daily life and power.`,
            `The current ${city.government} government is barely holding together.`,
            `The city‚Äôs main problem, ${city.problem}, defines much of its politics.`,
            `Despite ${city.problem}, the population keeps growing.`
        ];

        const featureLine = `Visitors immediately notice ${city.feature1.toLowerCase()} and ${city.feature2.toLowerCase()}, which dominate the skyline.`;

        return `${randomItem(hooks)} ${randomItem(focus)} ${featureLine}`;
    }

    function generateCity() {
        const city = {
            name: generateCityName(),
            size: randomItem(CITY_SIZES),
            specialty: randomItem(CITY_SPECIALTIES),
            government: randomItem(GOV_TYPES),
            problem: randomItem(PROBLEMS),
            feature1: randomItem(FEATURES),
            feature2: randomItem(FEATURES)
        };

        let safety = 0;
        while (city.feature2 === city.feature1 && safety++ < 5) {
            city.feature2 = randomItem(FEATURES);
        }

        city.population = estimatePopulation(city.size);

        const cityResult = document.getElementById("cityResult");
        cityResult.classList.remove("empty");
        cityResult.innerHTML = `
            <div class="row"><div class="label">Name</div><div class="value">${city.name}</div></div>
            <div class="row"><div class="label">Size</div><div class="value">${city.size}</div></div>
            <div class="row"><div class="label">Population</div><div class="value">${city.population.toLocaleString()}</div></div>
            <div class="row"><div class="label">Specialty</div><div class="value">${city.specialty}</div></div>
            <div class="row"><div class="label">Government</div><div class="value">${city.government}</div></div>
            <div class="row"><div class="label">Problem</div><div class="value">${city.problem}</div></div>
            <div class="row"><div class="label">Features</div><div class="value">${city.feature1}, ${city.feature2}</div></div>
        `;

        const lore = document.getElementById("cityLore");
        lore.style.display = "block";
        lore.textContent = generateCityLore(city);
    }

    const STORAGE_KEY = "arc_galaxy_worlds_v1";

    function loadGalaxy() {
        try {
            const raw = localStorage.getItem(STORAGE_KEY);
            if (!raw) return [];
            const data = JSON.parse(raw);
            return Array.isArray(data) ? data : [];
        } catch (e) {
            return [];
        }
    }

    function saveGalaxy() {
        try {
            localStorage.setItem(STORAGE_KEY, JSON.stringify(galaxy));
        } catch (e) {
            console.warn("Failed to save galaxy", e);
        }
    }

    function updateGalaxyCount() {
        const label = document.getElementById("galaxyCountLabel");
        const count = galaxy.length;
        label.textContent = count === 1 ? "1 saved world" : `${count} saved worlds`;
    }

    function renderGalaxy() {
        const container = document.getElementById("galaxyList");
        container.innerHTML = "";
        container.classList.remove("empty");

        if (galaxy.length === 0) {
            container.classList.add("empty");
            container.innerHTML = `No worlds saved yet. Generate a planet you like and click <strong>Save planet</strong>.`;
            updateGalaxyCount();
            return;
        }

        galaxy.forEach((planet, index) => {
            const card = document.createElement("div");
            card.className = "galaxy-card";

            const rarityClass =
                planet.rarityLabel === "Legendary" ? "rarity-legendary" :
                    planet.rarityLabel === "Rare" ? "rarity-rare" : "rarity-common";

            const header = document.createElement("div");
            header.className = "galaxy-header";
            header.innerHTML = `
                <div class="galaxy-name">${planet.name}</div>
                <div class="${rarityClass}">${planet.rarityLabel}</div>
            `;

            const sub = document.createElement("div");
            sub.style.opacity = "0.85";
            sub.textContent = `${planet.type} ¬∑ ${planet.mainBiome} ¬∑ ${planet.climate}`;

            const tags = document.createElement("div");
            tags.className = "galaxy-tags";
            tags.innerHTML = `
                <span class="galaxy-tag">Moons: ${planet.moons}</span>
                <span class="galaxy-tag">Gravity: ${planet.gravityG} g</span>
                <span class="galaxy-tag">Score: ${planet.rarityScore}</span>
            `;

            const small = document.createElement("div");
            small.style.opacity = "0.7";
            small.style.marginTop = "2px";
            small.textContent = `Slot #${index + 1}`;

            card.appendChild(header);
            card.appendChild(sub);
            card.appendChild(tags);
            card.appendChild(small);
            container.appendChild(card);
        });

        updateGalaxyCount();
    }

    function saveCurrentPlanet() {
        if (!currentPlanet) {
            alert("Generate a planet first.");
            return;
        }
        galaxy.push(currentPlanet);
        saveGalaxy();
        renderGalaxy();
    }

    function clearGalaxy() {
        if (!confirm("Clear all saved worlds from your galaxy? This only affects local storage in this browser.")) {
            return;
        }
        galaxy = [];
        saveGalaxy();
        renderGalaxy();
    }

    function mintComingSoon() {
        if (!currentPlanet) {
            alert("Generate and save a planet first. In a future version, this button will mint your selected world as an NFT on Arc testnet.");
            return;
        }

        alert(
            "NFT minting is not implemented yet.\n\n" +
            "Planned flow:\n" +
            "‚Ä¢ use the current planet's data as NFT metadata\n" +
            "‚Ä¢ call an Arc smart contract on testnet\n" +
            "‚Ä¢ return the transaction hash and token ID.\n\n" +
            "For now this is a placeholder to show the intended on-chain integration."
        );
    }

    function init() {
        galaxy = loadGalaxy();
        renderGalaxy();
    }

    init();
</script>
</body>
</html>
